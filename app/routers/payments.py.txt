from fastapi import APIRouter
from pydantic import BaseModel
import datetime

router = APIRouter()

class Payment(BaseModel):
    user_id: str
    amount: float
    currency: str
    country: str

payments_db = []

@router.post("/create")
def create_payment(payment: Payment):
    payment_record = payment.dict()
    payment_record["date"] = datetime.datetime.utcnow().isoformat()
    payment_record["status"] = "success"
    payments_db.append(payment_record)
    return {"success": True, "payment": payment_record}
